<div class="signup-container">
  <h2 class="signup-title">CREATE ACCOUNT</h2>
  
  <div class="success-message" *ngIf="successMessage">
    {{ successMessage }}
  </div>
  
  <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
    <!-- Username Field -->
    <div class="form-group">
      <div class="input-field">
        <span class="input-icon">👤</span>
        <input 
          type="text" 
          formControlName="username" 
          placeholder="Username" 
          [ngClass]="{'invalid': signUpForm.get('username')?.invalid && signUpForm.get('username')?.touched}"
        >
      </div>
      <div class="error-message" *ngIf="signUpForm.get('username')?.invalid && signUpForm.get('username')?.touched">
        <span *ngIf="signUpForm.get('username')?.errors?.['required']">Username is required</span>
        <span *ngIf="signUpForm.get('username')?.errors?.['minlength']">Username must be at least 3 characters</span>
        <span *ngIf="errorMessages['username']">{{ errorMessages['username'] }}</span>
      </div>
    </div>
    
    <!-- Email Field -->
    <div class="form-group">
      <div class="input-field">
        <span class="input-icon">✉️</span>
        <input 
          type="email" 
          formControlName="email" 
          placeholder="Email Address"
          [ngClass]="{'invalid': signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched}"
        >
      </div>
      <div class="error-message" *ngIf="signUpForm.get('email')?.invalid && signUpForm.get('email')?.touched">
        <span *ngIf="signUpForm.get('email')?.errors?.['required']">Email is required</span>
        <span *ngIf="signUpForm.get('email')?.errors?.['email']">Please enter a valid email</span>
        <span *ngIf="errorMessages['email']">{{ errorMessages['email'] }}</span>
      </div>
    </div>
    
    <!-- Password Field -->
    <div class="form-group">
      <div class="input-field">
        <span class="input-icon">🔒</span>
        <input 
          [type]="showPassword ? 'text' : 'password'" 
          formControlName="password" 
          placeholder="Password"
          [ngClass]="{'invalid': signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched}"
        >
        <span class="password-toggle" (click)="togglePasswordVisibility('password')">
          {{ showPassword ? '👁️' : '👁️‍🗨️' }}
        </span>
      </div>
      
      <!-- Password Strength Meter -->
      <div class="password-strength">
        <div class="strength-meter">
          <div class="strength-bar" [style.width.%]="passwordStrength" 
               [class.very-weak]="passwordStrength <= 20"
               [class.weak]="passwordStrength > 20 && passwordStrength <= 40"
               [class.moderate]="passwordStrength > 40 && passwordStrength <= 60"
               [class.strong]="passwordStrength > 60 && passwordStrength <= 80"
               [class.very-strong]="passwordStrength > 80">
          </div>
        </div>
        <div class="strength-message">{{ strengthMessage }}</div>
      </div>
      
      <div class="error-message" *ngIf="signUpForm.get('password')?.invalid && signUpForm.get('password')?.touched">
        Password must be at least 8 characters
      </div>
      <div class="password-hint">
        Your password should include uppercase, lowercase, numbers, and special characters
      </div>
    </div>
    
    <!-- Confirm Password Field -->
    <div class="form-group">
      <div class="input-field">
        <span class="input-icon">🔒</span>
        <input 
          [type]="showConfirmPassword ? 'text' : 'password'" 
          formControlName="confirmPassword" 
          placeholder="Confirm Password"
          [ngClass]="{'invalid': signUpForm.get('confirmPassword')?.invalid && signUpForm.get('confirmPassword')?.touched}"
        >
        <span class="password-toggle" (click)="togglePasswordVisibility('confirmPassword')">
          {{ showConfirmPassword ? '👁️' : '👁️‍🗨️' }}
        </span>
      </div>
      <div class="error-message" *ngIf="signUpForm.get('confirmPassword')?.invalid && signUpForm.get('confirmPassword')?.touched">
        <span *ngIf="signUpForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
        <span *ngIf="signUpForm.get('confirmPassword')?.errors?.['passwordMismatch']">Passwords do not match</span>
      </div>
    </div>
    
    <!-- Terms and Conditions -->
    <div class="terms-option">
      <div class="checkbox-container" (click)="toggleAgreeTerms()">
        <div class="checkbox" [ngClass]="{'checked': agreeTerms}">
          <div class="checkmark" *ngIf="agreeTerms">✓</div>
        </div>
        <label>I agree to the <a href="#">Terms and Conditions</a></label>
      </div>
      <div class="error-message" *ngIf="signUpForm.valid && !agreeTerms && signUpForm.touched">
        You must agree to the terms and conditions
      </div>
    </div>
    
    <!-- Server Error Messages -->
    <div class="server-error" *ngIf="errorMessages['general']">
      {{ errorMessages['general'] }}
    </div>
    
    <!-- Submit Button -->
    <button type="submit" class="signup-button" [disabled]="signUpForm.invalid || !agreeTerms || isLoading">
      <span *ngIf="!isLoading">SIGN UP</span>
      <span *ngIf="isLoading" class="spinner"></span>
    </button>
    
    <!-- Login Link -->
    <div class="login-link">
      Already have an account? <a routerLink="/login">Log in</a>
    </div>
  </form>
</div>